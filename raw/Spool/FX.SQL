accept CRN PROMPT 'Enter the contract reference no ==> '
set head on
set array 1
set linesize 10000
set pagesize 50000
set colsep ';'
set numformat 999999999999999999.9999
set long 10000
set trimspool on
SPOOL C:\FX_DETAILS.SPL

PROMPT CSTB_CONTRACT
SELECT * FROM CSTB_CONTRACT WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT CSTB_CONTRACT_EVENT_LOG
SELECT * FROM CSTB_CONTRACT_EVENT_LOG WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT FXTB_CONTRACT_MASTER
SELECT * FROM FXTB_CONTRACT_MASTER WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT FXTBS_PAYMENT
SELECT * FROM FXTBS_PAYMENT WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT FXTBS_CONT_OPTION_DTLS
SELECT * FROM FXTBS_CONT_OPTION_DTLS WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT CSTB_AMOUNT_DUE
SELECT * FROM CSTB_AMOUNT_DUE WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT CSTB_AMOUNT_PAID
SELECT * FROM CSTB_AMOUNT_PAID WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT ACVW_ALL_AC_ENTRIES
SELECT * FROM ACVW_ALL_AC_ENTRIES WHERE TRN_REF_NO = UPPER('&CRN');

PROMPT CSTM_PRODUCT
SELECT * FROM CSTM_PRODUCT WHERE PRODUCT_CODE = SUBSTR(UPPER('&CRN'),4,4);

PROMPT FXTB_ACTIVITY_JOURNAL
SELECT * FROM FXTB_ACTIVITY_JOURNAL WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT FXTB_CONTRACT_REVALUATION
SELECT * FROM FXTB_CONTRACT_REVALUATION WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT FXTB_CONTRACT_VERSION_CTL
SELECT * FROM FXTB_CONTRACT_VERSION_CTL WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT FXTM_PRODUCT_DEFINITION
SELECT * FROM FXTM_PRODUCT_DEFINITION WHERE PRODUCT_CODE = SUBSTR(UPPER('&CRN'),4,4);

PROMPT ISTBS_CONTRACTIS
SELECT * FROM ISTBS_CONTRACTIS WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT ISTBS_CONTRACT_DETAILS
SELECT * FROM ISTBS_CONTRACT_DETAILS WHERE CONTRACT_REF_NO = '&CRN';

PROMPT ISTBS_CONTRACTIS_SWIFT
SELECT * FROM ISTBS_CONTRACTIS_SWIFT WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT FXTM_BRANCH_PARAMETERS
SELECT * FROM fxtms_branch_parameters WHERE BRANCH_CODE = SUBSTR('&CRN',1,3);

PROMPT CSTB_CONTRACT_EXCEPTION
SELECT * FROM CSTB_CONTRACT_EXCEPTION WHERE CONTRACT_REF_NO = '&CRN';

PROMPT  FXTBS_CONTRACT_VERSION_CTL
SELECT * FROM  FXTBS_CONTRACT_VERSION_CTL WHERE CONTRACT_REF_NO = '&CRN';

PROMPT CSTM_PRODUCT_ACCROLE
SELECT * FROM CSTM_PRODUCT_ACCROLE WHERE PRODUCT_CODE = SUBSTR(UPPER('&CRN'),4,4);

PROMPT CSTM_PRODUCT_EVENT_ACCT_ENTRY
SELECT * FROM CSTM_PRODUCT_EVENT_ACCT_ENTRY WHERE PRODUCT_CODE = SUBSTR(UPPER('&CRN'),4,4)
order by event_code,amt_tag,dr_cr_indicator;

PROMPT MSTBS_DLY_MSG_OUT
SELECT * FROM MSTBS_DLY_MSG_OUT WHERE REFERENCE_NO = '&CRN';

PROMPT ISTBS_MSGHO
SELECT * FROM ISTBS_MSGHO
WHERE contract_ref_no = '&CRN'
ORDER BY EVENT_SEQ_NO, MSG_TYPE, RECEIVER, SERIAL_NO;

PROMPT CSTM_PRODUCT_EVENT_ADVICE 
SELECT * FROM CSTM_PRODUCT_EVENT_ADVICE WHERE PRODUCT_CODE = UPPER(SUBSTR('&CRN',4,4))
ORDER BY PRODUCT_CODE, EVENT_CODE, MSG_TYPE ;

PROMPT CSTB_CONTRACT_EVENT_ADVICE
SELECT * FROM CSTB_CONTRACT_EVENT_ADVICE WHERE CONTRACT_REF_NO = UPPER('&CRN')
ORDER BY CONTRACT_REF_NO, EVENT_SEQ_NO, MSG_TYPE ;

PROMPT MSTB_ARCHIVE_OUT 
SELECT * FROM MSTB_ARCHIVE_OUT WHERE REFERENCE_NO = UPPER('&CRN');

PROMPT CONTRACT_EXCEPTION
SELECT * FROM CSTB_CONTRACT_EXCEPTION WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT fxtbs_memo_revaluation
SELECT * FROM fxtbs_memo_revaluation WHERE CONTRACT_REF_NO = UPPER('&CRN');

PROMPT CYTMS_CCY_DEFN
SELECT * FROM CYTMS_CCY_DEFN;

PROMPT FXTB_SWAP_CONTRACT_LOG
SELECT * FROM  FXTB_SWAP_CONTRACT_LOG WHERE PRD_REF_NO =  UPPER('&CRN') OR COMB_REF_NO =  UPPER('&CRN') ;

select * from lmtb_line_utils where mod_code='FX' and ref_no = UPPER('&CRN');

SPOOL OFF